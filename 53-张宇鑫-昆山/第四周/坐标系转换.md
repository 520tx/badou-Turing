# 世界坐标系-----图像坐标的转换退到

## 1、世界坐标系----相机坐标系

设世界中某一个点对应的世界坐标为  （X,Y,Z），对应的相机中的坐标为（X<sub>c</sub>,Y<sub>c</sub>,Z<sub>c</sub>），二者的对应关系可以由欧式变换可得

$$
\left[
 \begin{matrix}
   Xc \\
   Yc \\
   Zc \\
   1
  \end{matrix}
  \right] \tag{1}
  =
  \left[
 \begin{matrix}
   R &t\\
   0 &1\\
  \end{matrix}
  \right]
  
  *
  \left[
 \begin{matrix}
   X \\
   Y \\
   Z \\
   1
  \end{matrix}
  \right]
$$
式中R,t是一个矩阵
$$
R = \left[
 \begin{matrix}
   R1 &0 &0 &0\\
   0 &R2 &0 &0 \\
   0 &0 &R3 &0 \\
  \end{matrix}
  \right]
$$

$$
t = \left[
 \begin{matrix}
   0 &0 &0 &t1\\
   0 &0 &0 &t2 \\
   0 &0 &0 &t3 \\
  \end{matrix}
  \right]
$$

再转换一次应该可以看得更清楚


$$
\left[
 \begin{matrix}
   Xc \\
   Yc \\
   Zc \\
   1
  \end{matrix}
  \right] 
  =
  \left[
 \begin{matrix}
   \left[
 \begin{matrix}
   R1 &0 &0 &0\\
   0 &R2 &0 &0 \\
   0 &0 &R3 &0 \\
 
  \end{matrix}
  \right] &\left[
 \begin{matrix}
   0 &0 &0 &t1\\
   0 &0 &0 &t2 \\
   0 &0 &0 &t2 \\
 
  \end{matrix}
  \right] \\
  \left[
 \begin{matrix}
   0 &0 &0 &0\\
   0 &0 &0 &0\\
   0 &0 &0 &0\\
   0 &0 &0 &0\\
 
  \end{matrix}
  \right]  &\left[
 \begin{matrix}
   1 &1 &1 &1\\
   1 &1 &1 &1\\
   1 &1 &1 &1\\
   1 &1 &1 &1\\
 
  \end{matrix}
  \right]\\
  \end{matrix}
  \right]
  
  *
  \left[
 \begin{matrix}
  \left[
 \begin{matrix}
   X &0 &0\\
   0 &Y &0\\
   0 &0 &Z \\
   0 &0 &0
  \end{matrix}
  \right]\\
  \left[
 \begin{matrix}
   0 &0 &0\\
   0 &0 &0\\
   0 &0 &0 \\
   1 &1 &1
  \end{matrix}
  \right]
  \end{matrix}
  \right]
$$

## 2、相机坐标系----图像坐标系

设相机坐标对应的图像坐标为(X',Y')，图像距离相机中心距离为f，则
$$
\frac{X'}{f}=\frac{Xc}{Zc}
\\
\frac{Y'}{f}=\frac{Yc}{Zc}
$$
转换后,得
$$
Zc *
\left[
 \begin{matrix}
   X' \\
   Y' \\
   1
  \end{matrix}
\right] \tag{2}
=
\left[
 \begin{matrix}
   f &0 &0\\
   0 &f &0\\
   0 &0 &1
  \end{matrix}
\right]
*
\left[
 \begin{matrix}
   Xc\\
   Yc\\
   Zc
  \end{matrix}
\right]
$$
3、图像坐标系-----像素坐标系

设图像坐标系对应的像素坐标为(u,v)，dx为X方向一个像素的距离，dy为Y方向一个像素的距离,

图像坐标中心(u0,v0)    ====>  例：5*7的图像 u0=3 v0=4

可得
$$
u = \frac{X'}{dx} + u0 \\ v = \frac{Y'}{dx} + v0
$$


